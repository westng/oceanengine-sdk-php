âš ï¸âš ï¸âš ï¸ é¡¹ç›®æ­£åœ¨è¿›è¡Œé‡æ„ æœŸå¾… 2.0 æ­£å¼ç‰ˆæœ¬

# Marketing PHP SDK

## æ¦‚è¿°

åœ¨æŠ€æœ¯è“¬å‹ƒå‘å±•çš„å½“ä¸‹ï¼Œå·¨é‡å¼•æ“å¼€æ”¾å¹³å°çš„ Marketing API SDKï¼Œæœ¬åº”æ˜¯æ™®æƒ æ‰€æœ‰å¼€å‘è€…çš„å¾—åŠ›å·¥å…·ï¼Œæ¶µç›–å·¨é‡å¹¿å‘Šã€å·¨é‡åƒå·ã€å·¨é‡æœ¬åœ°æ¨ã€å·¨é‡æ˜Ÿå›¾åŠä¼ä¸šå·ç›¸å…³åŠŸèƒ½ï¼Œä» Token è·å–åˆ°è¯·æ±‚å°è£…ã€å“åº”è§£é‡Šï¼Œæ¯ä¸ªç¯èŠ‚éƒ½æš—è—åŠ©åŠ›é«˜æ•ˆå¼€å‘çš„ç„æœºã€‚

å…¶æœ¬åœ°åŒ–è®¾è®¡ï¼Œç†åº”ä¸ºå¼€å‘è€…å¼€è¾Ÿä¾¿æ·é€šé“ï¼Œæ— è®ºç»éªŒå¦‚ä½•ï¼Œéƒ½èƒ½å€Ÿå®ƒåœ¨ API è°ƒç”¨ä¹‹è·¯ä¸Šç•…è¡Œæ— é˜»ã€‚å¯ç°å®å´ä»¤äººå’‹èˆŒï¼Œé¢å¯¹ PHP è¿™ç‰‡é«˜æ‰‹äº‘é›†ã€æ´»åŠ›æ»¡æ»¡çš„é¢†åŸŸï¼Œå®˜æ–¹ç«Ÿç„¶ç¼ºå¤± PHP ç‰ˆæœ¬çš„ SDKï¼

è¿™ç®€ç›´è’è°¬è‡³æã€‚PHP å¼€å‘è€…ä»¬ä¸ºäº’è”ç½‘ç«‹ä¸‹æ±—é©¬åŠŸåŠ³ï¼Œå¦‚ä»Šå´åƒè¢«æŠ›å¼ƒçš„å­©å­ã€‚çœ‹ç€å…¶ä»–è¯­è¨€å¼€å‘è€…ä»—ç€å®˜æ–¹ SDK å¤§æ­¥å¿«è·‘ï¼Œè‡ªå·±åªèƒ½å¾’æ‰‹åœ¨è†æ£˜ä¸­æŒ£æ‰ï¼Œå¤ªä¸å…¬å¹³ï¼å¥½æ¯”é©¬æ‹‰æ¾èµ›åœºï¼Œåˆ«äººè£…å¤‡ç²¾è‰¯ã€è¡¥ç»™å……è¶³ï¼Œè‡ªå·±å´èµ¤è„šå‰è¡Œã€æ— æ°´å¯é¥®ã€‚

å¹¸æœ‰è¡¥æ•‘æ€§ SDKï¼Œè®© PHP å¼€å‘è€…ä¸è‡³äºæ‰é˜Ÿï¼Œèƒ½å‡­æœ¬äº‹æ­èµ·æŠ•æ”¾ç®¡ç†ç³»ç»Ÿï¼Œä½†èƒŒåæ˜¯ä»–ä»¬ä»˜å‡ºçš„è¯¸å¤šé¢å¤–å¿ƒè¡€ã€‚å®˜æ–¹è¿™ç§"åå¿ƒ"åšæ³•ï¼Œå®åœ¨è¯¥åçœï¼Œç»™ PHP å¼€å‘è€…ä»¬ä¸€ä¸ªäº¤ä»£ï¼

## ä½¿ç”¨æ¡ä»¶

### å¼€å‘è€…æ¡ä»¶
- ä½¿ç”¨ SDK éœ€è¦é¦–å…ˆæ³¨å†Œæˆä¸ºå·¨é‡å¼•æ“å¼€å‘è€…ï¼Œè¯·å‚è€ƒ[å¼€å‘è€…å¿«é€Ÿå…¥é—¨æ–‡æ¡£](https://open.oceanengine.com/labels/7/docs/1696710498372623)
- ä½¿ç”¨ SDK éœ€è¦å…ˆæ‹¥æœ‰ API çš„è®¿é—®æƒé™ï¼Œæ‰€æœ‰ SDK çš„ä½¿ç”¨ä¸åº”ç”¨æ‹¥æœ‰çš„æƒé™ç»„ç›¸å…³è”

### ç¯å¢ƒè¦æ±‚

- PHP >= 8.0
- curl æ‰©å±•æ”¯æŒ
- æ¨èä½¿ç”¨ Composer å®‰è£…ä¾èµ–

## å®‰è£…

```shell
composer require westng/oceanengine-sdk-php
```

## ğŸš€ å¿«é€Ÿå…¥é—¨

### ç”¨æˆ·æˆæƒï¼ˆè·å– Access Tokenï¼‰

#### 1. è·å–æˆæƒ URL

| å‚æ•°     | è¯´æ˜                             | é»˜è®¤å€¼             | ç¤ºä¾‹å€¼              | ç‰ˆæœ¬  |
| -------- | -------------------------------- | ------------------ | ------------------- | ----- |
| `cb_url` | å³å›è°ƒé“¾æ¥                       | -                  | https://xxx.xxx.xxx | 1.0.0 |
| `scope`  | å³æˆæƒèŒƒå›´ï¼ˆå…¨éƒ¨æƒé™ null å³å¯ï¼‰ | -                  | -                   | 1.0.0 |
| `state`  | è‡ªå®šä¹‰å‚æ•°                       | your_custom_params | -                   | 1.0.0 |
| `type`   | æˆæƒç±»å‹                         | QC                 | `QC`ï½œ`AD`          | 1.0.0 |

```php
<?php

declare(strict_types=1);
/**
 * This file is part of Marketing PHP SDK.
 *
 * @link     https://github.com/westng/oceanengine-sdk-php
 * @document https://github.com/westng/oceanengine-sdk-php
 * @contact  westng
 * @license  https://github.com/westng/oceanengine-sdk-php/blob/main/LICENSE
 */
use Core\Exception\OceanEngineException;
use OceanEngineSDK\OceanEngineAuth;

require_once __DIR__ . '/../index.php';
require_once __DIR__ . '/config/config.php';

/**
 * Name è·å–æˆæƒé“¾æ¥
 * Class GetAuthCodeUrl.
 */
class GetAuthCodeUrl
{
    public static function run(): void
    {
        try {
            $auth = new OceanEngineAuth(APPID, SECRET);
            $url = $auth->getAuthCodeUrl(CALLBACK_URL, '', 'auth_code', 'AD');
            echo "[æˆæƒé“¾æ¥]\n{$url}\n";
        } catch (OceanEngineException $e) {
            echo 'é”™è¯¯ç±»å‹: ' . $e->getErrorType() . PHP_EOL;
            echo 'é”™è¯¯ç : ' . $e->getErrorCode() . PHP_EOL;
            echo 'é”™è¯¯ä¿¡æ¯: ' . $e->getErrorMessage() . PHP_EOL;
            exit(1);
        }
    }
}

GetAuthCodeUrl::run();
```

#### 2. è·å– Access Token

```php
<?php


declare(strict_types=1);

/**
 * This file is part of Marketing PHP SDK.
 *
 * @link     https://github.com/westng/oceanengine-sdk-php
 * @document https://github.com/westng/oceanengine-sdk-php
 * @contact  westng
 * @license  https://github.com/westng/oceanengine-sdk-php/blob/main/LICENSE
 */

use Core\Exception\OceanEngineException;
use OceanEngineSDK\OceanEngineAuth;

require_once __DIR__ . '/../../index.php';
require_once __DIR__ . '/../config/config.php';

/**
 * Name åˆ·æ–°Token
 * Class RefreshToken.
 */
class RefreshToken
{
    public static function run(): void
    {
        try {
            $auth = new OceanEngineAuth(APPID, SECRET);
            $rsp_data = $auth->RefreshToken(REFRESH_TOKEN);
            print_r($rsp_data);
        } catch (OceanEngineException $e) {
            echo 'é”™è¯¯ç±»å‹: ' . $e->getErrorType() . PHP_EOL;
            echo 'é”™è¯¯ç : ' . $e->getErrorCode() . PHP_EOL;
            echo 'é”™è¯¯ä¿¡æ¯: ' . $e->getErrorMessage() . PHP_EOL;
            exit(1);
        }
    }
}

RefreshToken::run();

```

### ä½¿ç”¨ APIï¼ˆåŸºäºå·²è·å–çš„ Tokenï¼‰

#### 1. è·å–å¹¿å‘Šä¸»ä¿¡æ¯
æ›´å¤šæ–¹æ³•è¯·æŸ¥è¯¢testsæ–‡ä»¶ï¼Œæˆ–è€…docsæ–‡æ¡£

```php
<?php

declare(strict_types=1);
/**
 * This file is part of Marketing PHP SDK.
 *
 * @link     https://github.com/westng/oceanengine-sdk-php
 * @document https://github.com/westng/oceanengine-sdk-php
 * @contact  westng
 * @license  https://github.com/westng/oceanengine-sdk-php/blob/main/LICENSE
 */
use Core\Exception\OceanEngineException;
use OceanEngineSDK\OceanEngineClient;

require_once __DIR__ . '/../../../index.php';
require_once __DIR__ . '/../../config/config.php';

/**
 * Name è·å–å¹¿å‘Šä¸»ä¿¡æ¯
 * Class AdvertiserInfo.
 */
class AdvertiserInfo
{
    public static function run(): void
    {
        try {
            $client = new OceanEngineClient(TOKEN);

            $args = [
                'account_ids' => ADVERTISER_IDS,
            ];

            $response = $client->module('Account')
                ->AccountInfo
                ->AdvertiserInfo()
                ->setParams($args)
                ->send();

            echo "[è¯·æ±‚æˆåŠŸ]\n";

            $body = $response->getBody();
            $array = json_decode((string) $body, true);

            print_r($array);  // æ¸…æ™°æ•°ç»„è¾“å‡º
        } catch (OceanEngineException $e) {
            echo 'é”™è¯¯ç±»å‹: ' . $e->getErrorType() . PHP_EOL;
            echo 'é”™è¯¯ç : ' . $e->getErrorCode() . PHP_EOL;
            echo 'é”™è¯¯ä¿¡æ¯: ' . $e->getErrorMessage() . PHP_EOL;
            exit(1);
        }
    }
}

AdvertiserInfo::run();

```

### SDK åŒ…ç»“æ„

```
docs/                                           // æ¥å£æ–‡æ¡£
â”œâ”€â”€ JULIANGQIANCHUAN.md                         // å·¨é‡åƒå·æ–‡æ¡£
â”œâ”€â”€ JULIANGADS.md                               // å·¨é‡å¹¿å‘Šæ–‡æ¡£
â”œâ”€â”€ ACCOUNT.md                                  // è´¦å·æœåŠ¡æ–‡æ¡£
â”œâ”€â”€ JULIANGLOCALPUSH.md                         // å·¨é‡æœ¬åœ°æ¨æ–‡æ¡£
â”œâ”€â”€ TOOLS.md                                    // å·¥å…·æ–‡æ¡£
â””â”€â”€ JULIANGSTARMAP.md                           // å·¨é‡æ˜Ÿå›¾æ–‡æ¡£
src/
â”œâ”€â”€ Oauth/
â”‚   â”œâ”€â”€ GetAccessToken.php                      // è·å– AccessToken
â”‚   â””â”€â”€ RefreshToken.php                        // åˆ·æ–° AccessToken
â”œâ”€â”€ Core/                                       // æ ¸å¿ƒåŒ…
â”‚   â”œâ”€â”€ Autoloader/
â”‚   â”‚   â””â”€â”€ Autoloader.php
â”‚   â”œâ”€â”€ Exception/                              // å¼‚å¸¸å¤„ç†
â”‚   â”œâ”€â”€ Helper/                                 // åŠ©æ‰‹å‡½æ•°
â”‚   â”œâ”€â”€ Http/                                   // Httpè¯·æ±‚
â”‚   â””â”€â”€ Profile/                                // æ ¸å¿ƒ
â”œâ”€â”€ Api/
â”‚   â”œâ”€â”€ Account/                                // è´¦å·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ AdQualification/                    // å¹¿å‘Šä¸»ä¿¡æ¯ä¸èµ„è´¨ç®¡ç†
â”‚   â”œâ”€â”€ JuLiangAds/                             // å·¨é‡å¹¿å‘Š
â”‚   â”‚   â”œâ”€â”€ AdsPro/                             // å·¨é‡å¹¿å‘Šå‡çº§ç‰ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ AdAccountBudget/                // å¹¿å‘Šè´¦æˆ·é¢„ç®—
â”‚   â”‚   â”‚   â”œâ”€â”€ AdManagement/                   // å¹¿å‘Šç®¡ç†æ¨¡å—
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CdpBrandGet.php             // è·å–å…³è”äº‘å›¾çš„å¹¿å‘Šä¸»è´¦æˆ·ä¿¡æ¯
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Module.php                  // æ¨¡å‹
â”‚   â”‚   â””â”€â”€ Module.php
â”‚   â”œâ”€â”€ JuLiangQianChuan/                       // å·¨é‡åƒå·
â”‚   â”œâ”€â”€ JuLiangStarMap/                         // å·¨é‡æ˜Ÿå›¾
â”‚   â”œâ”€â”€ EnterpriseAccount/                      // ä¼ä¸šå·
â”‚   â””â”€â”€ JuLiangLocalPush/                       // æœ¬åœ°æ¨
â”œâ”€â”€ tests/                                      // æ¥å£æµ‹è¯•
â”œâ”€â”€ LICENSE
â””â”€â”€ README.md
```

## å½“å‰å¼€å‘è¿›åº¦

> ğŸš§ æ³¨æ„ï¼šè´¦æˆ·ç®¡ç†\ç´ æç®¡ç†\æ•°æ®æŠ¥è¡¨\å·¥å…· æ¨¡å—éƒ¨åˆ†æ¥å£åœ¨å·¨é‡å„å¹³å°ï¼ˆå¹¿å‘Šã€åƒå·ã€æœ¬åœ°æ¨ã€æ˜Ÿå›¾ï¼‰é€šç”¨ã€‚

| **æ¨¡å—**   | **å®ä¾‹è°ƒç”¨æ¨¡å—**                       | **çŠ¶æ€**  | **æ–‡æ¡£é“¾æ¥**                         |
| ---------- | -------------------------------------- | --------- | ------------------------------------ |
| è´¦æˆ·ç®¡ç†   | `$client->module('Account')`           | âœ… å·²å®Œæˆ | [ç‚¹å‡»æŸ¥çœ‹](docs/ACCOUNT.md)          |
| ç´ æç®¡ç†   | `$client->module('Materials')`         | âœ… å·²å®Œæˆ | [ç‚¹å‡»æŸ¥çœ‹](docs/MATERIALS.md)        |
| æ•°æ®æŠ¥è¡¨   | `$client->module('DataReports')`       | âœ… å·²å®Œæˆ | [ç‚¹å‡»æŸ¥çœ‹](docs/DATAREPORTS.md)      |
| å·¥å…·       | `$client->module('Tools')`             | âœ… å·²å®Œæˆ | [ç‚¹å‡»æŸ¥çœ‹](docs/TOOLS.md)            |
| å·¨é‡å¹¿å‘Š   | `$client->module('JuLiangAds')`        | âœ… å·²å®Œæˆ | [ç‚¹å‡»æŸ¥çœ‹](docs/JULIANGADS.md)       |
| å·¨é‡åƒå·   | `$client->module('JuLiangQianChuan')`  | âœ… å·²å®Œæˆ | [ç‚¹å‡»æŸ¥çœ‹](docs/JULIANGQIANCHUAN.md) |
| å·¨é‡æ˜Ÿå›¾   | `$client->module('JuLiangStarMap')`    | âœ… å·²å®Œæˆ | [ç‚¹å‡»æŸ¥çœ‹](docs/JULIANGSTARMAP.md)   |
| å·¨é‡æœ¬åœ°æ¨ | `$client->module('JuLiangLocalPush')`  | âœ… å·²å®Œæˆ | [ç‚¹å‡»æŸ¥çœ‹](docs/JULIANGLOCALPUSH.md) |
| ä¼ä¸šå·     | `$client->module('EnterpriseAccount')` | â³ æœªå¼€å§‹ | -                                    |

> âš ï¸ ä¸Šè¿°è¿›åº¦ä»…ä¾›å‚è€ƒï¼Œå®é™…ä»¥æºç ä¸ºå‡†ã€‚  
> ğŸ§  æ¬¢è¿æŸ¥çœ‹æºç æ·±å…¥æ¢ç´¢ï¼Œæ¥å£æ¯”æ–‡æ¡£æ›´è¯šå®ï¼

## é—®é¢˜åé¦ˆ

å¦‚åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ã€å»ºè®®æˆ–çµæ„Ÿâ€¦â€¦è¯·æ— è§†ï¼ˆå¼€ç©ç¬‘çš„ï¼‰ã€‚

> ğŸ“¨ å®åœ¨æ†‹ä¸ä½å¯ä»¥æ Issue æˆ– PR ï½
